## üéØ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏—è –±–æ—Ç–∞ –≤ Google –¢–∞–±–ª–∏—Ü—ã:

- üìä **–≠–∫—Å–ø–æ—Ä—Ç —É–∑–ª–æ–≤ —Å—Ü–µ–Ω–∞—Ä–∏—è** (Nodes) ‚Äî –≤—Å–µ —É–∑–ª—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏, —Ç–∏–ø–∞–º–∏, –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- üìà **–≠–∫—Å–ø–æ—Ä—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** (Variables) ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- üìä **–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** (Statistics) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏—Å—Ç–æ–≤, —É–∑–ª–æ–≤, —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤
- üîò **–ö–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞** –≤ –ø–∞–Ω–µ–ª–∏ –∫–æ–¥–∞ –¥–ª—è –ª—é–±–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- üîó **–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞** –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ UI

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —ç–∫—Å–ø–æ—Ä—Ç–∞

–¢–µ–ø–µ—Ä—å —ç–∫—Å–ø–æ—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–º–µ—é—Ç —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:

- üíæ **–≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚Äî `lastExportedGoogleSheetUrl`, `lastExportedAt`
- üíæ **–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** ‚Äî `lastExportedStructureSheetUrl`, `lastExportedStructureAt`
- üïê **–†–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
- üìä **–†–∞–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏** –≤ UI (–ë–î –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π vs –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞)

### –£–ª—É—á—à–µ–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞

- ‚úèÔ∏è **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ multiSelectVariable** –¥–ª—è —É–∑–ª–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º
- üé® **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥—É–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞** ‚Äî 6 –º–æ–¥—É–ª–µ–π –≤–º–µ—Å—Ç–æ 1 —Ñ–∞–π–ª–∞
- üîê **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ OAuth** ‚Äî postMessage, –∞–≤—Ç–æ-–ø–æ–≤—Ç–æ—Ä –ø–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- üìù **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî docs/releases/v1.0.2.md

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `bot_projects`:

```sql
last_exported_structure_sheet_id    text
last_exported_structure_sheet_url   text
last_exported_structure_at          timestamp
```

### –ú–æ–¥—É–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```
server/google-sheets/
‚îú‚îÄ‚îÄ export-structure.ts           # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ structure-exporter.ts         # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ sheets
‚îú‚îÄ‚îÄ structure-creator.ts          # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
‚îú‚îÄ‚îÄ structure-nodes-exporter.ts   # –≠–∫—Å–ø–æ—Ä—Ç —É–∑–ª–æ–≤
‚îú‚îÄ‚îÄ structure-stats-exporter.ts   # –≠–∫—Å–ø–æ—Ä—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îî‚îÄ‚îÄ structure-formatter.ts        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `shared/schema.ts` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã 3 –Ω–æ–≤—ã—Ö –ø–æ–ª—è
- `server/google-sheets/export-metadata.ts` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö —Ç–∏–ø–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞
- `server/routes/setupProjectRoutes.ts` ‚Äî –º–∞—Ä—à—Ä—É—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- `client/components/editor/code-panel.tsx` ‚Äî –∫–Ω–æ–ø–∫–∞ –∏ UI —ç–∫—Å–ø–æ—Ä—Ç–∞
- `client/lib/storage/local-storage.ts` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã

### –ú–∏–≥—Ä–∞—Ü–∏–∏

- `0002_add_structure_export_fields.sql` ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `sheets[].nodes` –∏–∑ `project.json`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ `sheetId` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Google –¢–∞–±–ª–∏—Ü
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ OAuth –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (postMessage)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã TypeScript (BotProject, lastExportedStructureSheetUrl)
- –£–¥–∞–ª—ë–Ω —ç–∫—Å–ø–æ—Ä—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–≤—è–∑–µ–π (Connections)

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —ç–∫—Å–ø–æ—Ä—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–î–ª—è —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

```bash
npx tsx --tsconfig tsconfig.node.json scripts/apply-structure-export-migration.ts
```

---

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π:** [v1.0.2...v1.2.0](https://github.com/fedorabakumets/telegram-bot-builder/compare/v1.0.2...v1.2.0)
