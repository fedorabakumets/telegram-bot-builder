@echo off
chcp 65001 >nul
echo ========================================
echo ðŸ”§ Ð£ÐÐ˜Ð’Ð•Ð Ð¡ÐÐ›Ð¬ÐÐ«Ð™ Ð¡ÐšÐ Ð˜ÐŸÐ¢ Ð Ð•Ð¨Ð•ÐÐ˜Ð¯ ÐŸÐ ÐžÐ‘Ð›Ð•Ðœ
echo ========================================
echo.

echo ðŸ“‹ Ð­Ñ‚Ð¾Ñ‚ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ñ€ÐµÑˆÐ°ÐµÑ‚ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:
echo    âœ… Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ TypeScript
echo    âœ… ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
echo    âœ… ÐžÑ‡Ð¸Ñ‰Ð°ÐµÑ‚ ÐºÑÑˆ
echo    âœ… ÐŸÐµÑ€ÐµÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚
echo    âœ… Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ Ð±Ð°Ð·Ð¾Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
echo    âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
echo    âœ… Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ñ‚ÐµÑÑ‚Ñ‹
echo.

set /p confirm="ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ? (y/n): "
if /i not "%confirm%"=="y" (
    echo ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼.
    pause
    exit /b 0
)

echo.
echo ðŸš€ ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼...
echo.

:: Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð»Ð¾Ð³ Ñ„Ð°Ð¹Ð»
set LOGFILE=fix-problems-%date:~-4,4%%date:~-10,2%%date:~-7,2%-%time:~0,2%%time:~3,2%%time:~6,2%.log
echo Ð›Ð¾Ð³ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ Ð²: %LOGFILE%
echo.

:: Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
call :log "========================================="
call :log "ÐÐÐ§ÐÐ›Ðž Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð¯ ÐŸÐ ÐžÐ‘Ð›Ð•Ðœ: %date% %time%"
call :log "========================================="

:: 1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Node.js Ð¸ npm
echo ðŸ” 1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Node.js Ð¸ npm...
call :log "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Node.js Ð¸ npm"
node --version >> %LOGFILE% 2>&1
npm --version >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âŒ Node.js Ð¸Ð»Ð¸ npm Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹!
    call :log "ÐžÐ¨Ð˜Ð‘ÐšÐ: Node.js Ð¸Ð»Ð¸ npm Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹"
    goto :error
)
echo âœ… Node.js Ð¸ npm Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹

:: 2. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ ÐºÑÑˆ npm
echo ðŸ§¹ 2. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ ÐºÑÑˆ npm...
call :log "ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° ÐºÑÑˆÐ° npm"
npm cache clean --force >> %LOGFILE% 2>&1
echo âœ… ÐšÑÑˆ npm Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½

:: 3. Ð£Ð´Ð°Ð»ÑÐµÐ¼ node_modules Ð¸ package-lock.json
echo ðŸ—‘ï¸ 3. Ð£Ð´Ð°Ð»ÑÐµÐ¼ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸...
call :log "Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ node_modules Ð¸ package-lock.json"
if exist node_modules (
    rmdir /s /q node_modules >> %LOGFILE% 2>&1
    echo âœ… node_modules ÑƒÐ´Ð°Ð»ÐµÐ½
) else (
    echo â„¹ï¸ node_modules Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½
)

if exist package-lock.json (
    del package-lock.json >> %LOGFILE% 2>&1
    echo âœ… package-lock.json ÑƒÐ´Ð°Ð»ÐµÐ½
) else (
    echo â„¹ï¸ package-lock.json Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½
)

:: 4. Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
echo ðŸ“¦ 4. Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸...
call :log "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹"
npm install >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹!
    call :log "ÐžÐ¨Ð˜Ð‘ÐšÐ: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð°ÑÑŒ"
    goto :error
)
echo âœ… Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹

:: 5. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ TypeScript
echo ðŸ” 5. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ TypeScript...
call :log "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° TypeScript"
npx tsc --noEmit >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âš ï¸ ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ TypeScript (ÑÐ¼. Ð»Ð¾Ð³)
    call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ TypeScript"
) else (
    echo âœ… TypeScript Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾
)

:: 6. Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ Ð±Ð°Ð·Ð¾Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
echo ðŸ—„ï¸ 6. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…...
call :log "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…"
if exist .env (
    echo âœ… Ð¤Ð°Ð¹Ð» .env Ð½Ð°Ð¹Ð´ÐµÐ½
    call :log "Ð¤Ð°Ð¹Ð» .env Ð½Ð°Ð¹Ð´ÐµÐ½"
) else (
    if exist .env.example (
        copy .env.example .env >> %LOGFILE% 2>&1
        echo âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½ .env Ð¸Ð· .env.example
        call :log "Ð¡Ð¾Ð·Ð´Ð°Ð½ .env Ð¸Ð· .env.example"
    ) else (
        echo âš ï¸ Ð¤Ð°Ð¹Ð» .env Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½
        call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: Ð¤Ð°Ð¹Ð» .env Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"
    )
)

:: 7. Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑÑ…ÐµÐ¼Ñƒ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
echo ðŸ”„ 7. Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑÑ…ÐµÐ¼Ñƒ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…...
call :log "Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑÑ…ÐµÐ¼Ñ‹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…"
npx drizzle-kit generate >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âš ï¸ ÐžÑˆÐ¸Ð±ÐºÐ° Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑÑ…ÐµÐ¼Ñ‹ Ð‘Ð” (Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð°)
    call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: ÐžÑˆÐ¸Ð±ÐºÐ° Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑÑ…ÐµÐ¼Ñ‹ Ð‘Ð”"
) else (
    echo âœ… Ð¡Ñ…ÐµÐ¼Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°
)

:: 8. ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
echo ðŸš€ 8. ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸...
call :log "ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹"
npx drizzle-kit migrate >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âš ï¸ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹ (Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð‘Ð” Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð°)
    call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹"
) else (
    echo âœ… ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ñ‹
)

:: 9. Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚
echo ðŸ”¨ 9. Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚...
call :log "Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°"
npm run build >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âš ï¸ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ±Ð¾Ñ€ÐºÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° (ÑÐ¼. Ð»Ð¾Ð³)
    call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ±Ð¾Ñ€ÐºÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°"
) else (
    echo âœ… ÐŸÑ€Ð¾ÐµÐºÑ‚ ÑÐ¾Ð±Ñ€Ð°Ð½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾
)

:: 10. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð»Ð¸Ð½Ñ‚ÐµÑ€
echo ðŸ” 10. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÐºÐ¾Ð´ Ð»Ð¸Ð½Ñ‚ÐµÑ€Ð¾Ð¼...
call :log "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¸Ð½Ñ‚ÐµÑ€Ð¾Ð¼"
npm run lint >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âš ï¸ ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ ÐºÐ¾Ð´Ð¾Ð¼ (ÑÐ¼. Ð»Ð¾Ð³)
    call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ ÐºÐ¾Ð´Ð¾Ð¼"
) else (
    echo âœ… ÐšÐ¾Ð´ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð»Ð¸Ð½Ñ‚ÐµÑ€Ð¾Ð¼
)

:: 11. Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ñ‚ÐµÑÑ‚Ñ‹ (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ)
echo ðŸ§ª 11. Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ñ‚ÐµÑÑ‚Ñ‹...
call :log "Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð¾Ð²"
npm test >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âš ï¸ Ð¢ÐµÑÑ‚Ñ‹ Ð½Ðµ Ð¿Ñ€Ð¾ÑˆÐ»Ð¸ Ð¸Ð»Ð¸ Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹ (ÑÐ¼. Ð»Ð¾Ð³)
    call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: Ð¢ÐµÑÑ‚Ñ‹ Ð½Ðµ Ð¿Ñ€Ð¾ÑˆÐ»Ð¸"
) else (
    echo âœ… Ð¢ÐµÑÑ‚Ñ‹ Ð¿Ñ€Ð¾ÑˆÐ»Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾
)

:: 12. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ
echo ðŸ”’ 12. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ...
call :log "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸"
npm audit >> %LOGFILE% 2>&1
if errorlevel 1 (
    echo âš ï¸ ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ ÑƒÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
    call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ ÑƒÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸"
    echo ðŸ”§ ÐŸÑ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸...
    npm audit fix >> %LOGFILE% 2>&1
    if errorlevel 1 (
        echo âš ï¸ ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÑƒÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚Ð¸
        call :log "ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð•: ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÑƒÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚Ð¸"
    ) else (
        echo âœ… Ð£ÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ñ‹
    )
) else (
    echo âœ… Ð£ÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹
)

:: 13. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
echo ðŸ§¹ 13. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹...
call :log "ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²"
if exist dist (
    rmdir /s /q dist >> %LOGFILE% 2>&1
    echo âœ… ÐŸÐ°Ð¿ÐºÐ° dist Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ð°
)
if exist .next (
    rmdir /s /q .next >> %LOGFILE% 2>&1
    echo âœ… ÐŸÐ°Ð¿ÐºÐ° .next Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ð°
)
if exist .turbo (
    rmdir /s /q .turbo >> %LOGFILE% 2>&1
    echo âœ… ÐŸÐ°Ð¿ÐºÐ° .turbo Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ð°
)

:: Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ
call :log "========================================="
call :log "Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð• Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐž: %date% %time%"
call :log "========================================="

echo.
echo ========================================
echo âœ… Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð• ÐŸÐ ÐžÐ‘Ð›Ð•Ðœ Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐž!
echo ========================================
echo.
echo ðŸ“Š Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹:
echo    ðŸ“ Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¿ÐµÑ€ÐµÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
echo    ðŸ”§ ÐšÑÑˆ Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½
echo    ðŸ—„ï¸ Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð°
echo    ðŸ”¨ ÐŸÑ€Ð¾ÐµÐºÑ‚ ÑÐ¾Ð±Ñ€Ð°Ð½
echo    ðŸ” ÐšÐ¾Ð´ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½
echo    ðŸ§ª Ð¢ÐµÑÑ‚Ñ‹ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ñ‹
echo    ðŸ”’ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð°
echo.
echo ðŸ“‹ ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ð¹ Ð»Ð¾Ð³: %LOGFILE%
echo.
echo ðŸš€ Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚:
echo    npm run dev     - Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
echo    npm run build   - Ð´Ð»Ñ ÑÐ±Ð¾Ñ€ÐºÐ¸
echo    npm start       - Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
echo.
pause
exit /b 0

:error
call :log "ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐÐ¯ ÐžÐ¨Ð˜Ð‘ÐšÐ: %date% %time%"
echo.
echo âŒ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐÐ¯ ÐžÐ¨Ð˜Ð‘ÐšÐ!
echo ðŸ“‹ ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³: %LOGFILE%
echo.
pause
exit /b 1

:log
echo %~1 >> %LOGFILE%
goto :eof