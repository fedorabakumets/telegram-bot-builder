{
  "nodes": [
    {
      "id": "start_survey_node",
      "type": "start",
      "data": {
        "command": "/start",
        "description": "–ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
        "messageText": "üî• –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à —Å—É–ø–µ—Ä-–æ–ø—Ä–æ—Å!\n\n–ú—ã –∏–∑—É—á–∞–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å –Ω–∞—à —Å–µ—Ä–≤–∏—Å.\n\n–í–∞—à–µ –∏–º—è:",
        "keyboardType": "none",
        "enableTextInput": true,
        "collectUserInput": true,
        "inputVariable": "user_name",
        "saveToDatabase": true,
        "inputTargetNodeId": "age_question_node",
        "enableConditionalMessages": true,
        "conditionalMessages": [
          {
            "id": "first_visit_msg",
            "condition": "first_time",
            "messageText": "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑!\n–î–∞–≤–∞–π—Ç–µ –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –ø–æ–±–ª–∏–∂–µ.",
            "formatMode": "text",
            "keyboardType": "inline",
            "buttons": [
              {
                "id": "welcome_btn",
                "text": "–ù–∞—á–∞—Ç—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ",
                "action": "goto",
                "target": "age_question_node"
              }
            ]
          },
          {
            "id": "returning_user_msg",
            "condition": "returning_user",
            "messageText": "üëã –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º!\n–ü—Ä–æ–¥–æ–ª–∂–∏–º –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å?",
            "formatMode": "text",
            "keyboardType": "inline",
            "buttons": [
              {
                "id": "continue_btn",
                "text": "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",
                "action": "goto",
                "target": "age_question_node"
              },
              {
                "id": "restart_btn",
                "text": "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ",
                "action": "goto",
                "target": "age_question_node"
              }
            ]
          }
        ]
      },
      "position": {
        "x": 50,
        "y": 50
      }
    },
    {
      "id": "age_question_node",
      "type": "keyboard",
      "data": {
        "messageText": "–°–ø–∞—Å–∏–±–æ, {user_name}! üë§\n\n–¢–µ–ø–µ—Ä—å —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –≤–æ–∑—Ä–∞—Å—Ç:",
        "keyboardType": "inline",
        "collectUserInput": true,
        "inputVariable": "user_age",
        "saveToDatabase": true,
        "buttons": [
          {
            "id": "age_18_25",
            "text": "18-25 –ª–µ—Ç",
            "action": "goto",
            "target": "gender_question_node"
          },
          {
            "id": "age_26_35",
            "text": "26-35 –ª–µ—Ç",
            "action": "goto",
            "target": "gender_question_node"
          },
          {
            "id": "age_36_45",
            "text": "36-45 –ª–µ—Ç",
            "action": "goto",
            "target": "gender_question_node"
          },
          {
            "id": "age_46_plus",
            "text": "46+ –ª–µ—Ç",
            "action": "goto",
            "target": "gender_question_node"
          }
        ]
      },
      "position": {
        "x": 50,
        "y": 200
      }
    },
    {
      "id": "gender_question_node",
      "type": "keyboard",
      "data": {
        "messageText": "–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª:",
        "keyboardType": "reply",
        "collectUserInput": true,
        "inputVariable": "user_gender",
        "saveToDatabase": true,
        "resizeKeyboard": true,
        "oneTimeKeyboard": true,
        "buttons": [
          {
            "id": "gender_male",
            "text": "üë® –ú—É–∂—Å–∫–æ–π",
            "action": "goto",
            "target": "interests_question_node"
          },
          {
            "id": "gender_female",
            "text": "üë© –ñ–µ–Ω—Å–∫–∏–π",
            "action": "goto",
            "target": "interests_question_node"
          },
          {
            "id": "gender_other",
            "text": "ü§ù –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å",
            "action": "goto",
            "target": "interests_question_node"
          }
        ]
      },
      "position": {
        "x": 50,
        "y": 350
      }
    },
    {
      "id": "interests_question_node",
      "type": "keyboard",
      "data": {
        "messageText": "–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ! –ö–∞–∫–∏–µ —É –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—ã? (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)",
        "keyboardType": "inline",
        "collectUserInput": true,
        "inputVariable": "user_interests",
        "saveToDatabase": true,
        "multipleChoice": true,
        "buttons": [
          {
            "id": "interest_tech",
            "text": "üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
            "action": "toggle_selection",
            "value": "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"
          },
          {
            "id": "interest_sport",
            "text": "‚öΩ –°–ø–æ—Ä—Ç",
            "action": "toggle_selection",
            "value": "—Å–ø–æ—Ä—Ç"
          },
          {
            "id": "interest_music",
            "text": "üéµ –ú—É–∑—ã–∫–∞",
            "action": "toggle_selection",
            "value": "–º—É–∑—ã–∫–∞"
          },
          {
            "id": "interest_travel",
            "text": "‚úàÔ∏è –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è",
            "action": "toggle_selection",
            "value": "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è"
          },
          {
            "id": "interest_food",
            "text": "üçï –ï–¥–∞",
            "action": "toggle_selection",
            "value": "–µ–¥–∞"
          },
          {
            "id": "interest_books",
            "text": "üìö –ö–Ω–∏–≥–∏",
            "action": "toggle_selection",
            "value": "–∫–Ω–∏–≥–∏"
          },
          {
            "id": "interests_done",
            "text": "‚úÖ –ì–æ—Ç–æ–≤–æ",
            "action": "goto",
            "target": "experience_question_node"
          }
        ]
      },
      "position": {
        "x": 50,
        "y": 500
      }
    },
    {
      "id": "experience_question_node",
      "type": "input",
      "data": {
        "messageText": "–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–µ–º –æ–ø—ã—Ç–µ —Ä–∞–±–æ—Ç—ã –∏–ª–∏ —É—á–µ–±—ã (–≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ):",
        "enableTextInput": true,
        "collectUserInput": true,
        "inputVariable": "user_experience",
        "saveToDatabase": true,
        "inputTargetNodeId": "contact_question_node",
        "keyboardType": "none"
      },
      "position": {
        "x": 50,
        "y": 650
      }
    },
    {
      "id": "contact_question_node",
      "type": "keyboard",
      "data": {
        "messageText": "–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞—Å—Å–∫–∞–∑!\n\n–ú–æ–∂–µ–º –ª–∏ –º—ã —Å–≤—è–∑–∞—Ç—å—Å—è —Å –≤–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π?",
        "keyboardType": "inline",
        "collectUserInput": true,
        "inputVariable": "contact_consent",
        "saveToDatabase": true,
        "buttons": [
          {
            "id": "contact_yes",
            "text": "‚úÖ –î–∞, –º–æ–∂–µ—Ç–µ",
            "action": "goto",
            "target": "contact_info_node"
          },
          {
            "id": "contact_no",
            "text": "‚ùå –ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ",
            "action": "goto",
            "target": "feedback_question_node"
          }
        ]
      },
      "position": {
        "x": 50,
        "y": 800
      }
    },
    {
      "id": "contact_info_node",
      "type": "input",
      "data": {
        "messageText": "–û—Ç–ª–∏—á–Ω–æ! –£–∫–∞–∂–∏—Ç–µ –≤–∞—à email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏:",
        "enableTextInput": true,
        "collectUserInput": true,
        "inputVariable": "user_contact",
        "saveToDatabase": true,
        "inputTargetNodeId": "feedback_question_node",
        "keyboardType": "none"
      },
      "position": {
        "x": 200,
        "y": 950
      }
    },
    {
      "id": "feedback_question_node",
      "type": "keyboard",
      "data": {
        "messageText": "–ü–æ—á—Ç–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏! –û—Ü–µ–Ω–∏—Ç–µ –Ω–∞—à –æ–ø—Ä–æ—Å –æ—Ç 1 –¥–æ 5:",
        "keyboardType": "inline",
        "collectUserInput": true,
        "inputVariable": "survey_rating",
        "saveToDatabase": true,
        "buttons": [
          {
            "id": "rating_1",
            "text": "1‚≠ê",
            "action": "goto",
            "target": "suggestions_node"
          },
          {
            "id": "rating_2",
            "text": "2‚≠ê",
            "action": "goto",
            "target": "suggestions_node"
          },
          {
            "id": "rating_3",
            "text": "3‚≠ê",
            "action": "goto",
            "target": "suggestions_node"
          },
          {
            "id": "rating_4",
            "text": "4‚≠ê",
            "action": "goto",
            "target": "final_thanks_node"
          },
          {
            "id": "rating_5",
            "text": "5‚≠ê",
            "action": "goto",
            "target": "final_thanks_node"
          }
        ]
      },
      "position": {
        "x": 50,
        "y": 1100
      }
    },
    {
      "id": "suggestions_node",
      "type": "input",
      "data": {
        "messageText": "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É! –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å? (–æ–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)",
        "enableTextInput": true,
        "collectUserInput": true,
        "inputVariable": "user_suggestions",
        "saveToDatabase": true,
        "inputTargetNodeId": "final_thanks_node",
        "keyboardType": "none"
      },
      "position": {
        "x": 350,
        "y": 1250
      }
    },
    {
      "id": "final_thanks_node",
      "type": "message",
      "data": {
        "messageText": "üéâ –°–ø–∞—Å–∏–±–æ –±–æ–ª—å—à–æ–µ, {user_name}!\n\n–í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã –¥–ª—è –Ω–∞—Å:\n\nüë§ –í–æ–∑—Ä–∞—Å—Ç: {user_age}\nüë´ –ü–æ–ª: {user_gender}\nüéØ –ò–Ω—Ç–µ—Ä–µ—Å—ã: {user_interests}\nüíº –û–ø—ã—Ç: {user_experience}\nüìû –°–≤—è–∑—å: {contact_consent}\n‚≠ê –û—Ü–µ–Ω–∫–∞: {survey_rating}\n\n–ú—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—á—Ç–µ–º –≤–∞—à–µ –º–Ω–µ–Ω–∏–µ!",
        "keyboardType": "inline",
        "buttons": [
          {
            "id": "restart_survey",
            "text": "üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â–µ —Ä–∞–∑",
            "action": "goto",
            "target": "start_survey_node"
          },
          {
            "id": "share_survey",
            "text": "üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –æ–ø—Ä–æ—Å–æ–º",
            "action": "url",
            "url": "https://t.me/share/url?url=–ü—Ä–æ–π–¥–∏%20–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π%20–æ–ø—Ä–æ—Å!"
          }
        ]
      },
      "position": {
        "x": 50,
        "y": 1400
      }
    },
    {
      "id": "profile_command_node",
      "type": "command",
      "data": {
        "command": "/profile",
        "description": "–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        "messageText": "üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å:\n\nüìù –ò–º—è: {user_name}\nüéÇ –í–æ–∑—Ä–∞—Å—Ç: {user_age}\nüë´ –ü–æ–ª: {user_gender}\nüéØ –ò–Ω—Ç–µ—Ä–µ—Å—ã: {user_interests}\nüíº –û–ø—ã—Ç: {user_experience}\nüìû –ö–æ–Ω—Ç–∞–∫—Ç: {user_contact}\n‚≠ê –û—Ü–µ–Ω–∫–∞ –æ–ø—Ä–æ—Å–∞: {survey_rating}\nüí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: {user_suggestions}",
        "keyboardType": "inline",
        "buttons": [
          {
            "id": "edit_profile",
            "text": "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",
            "action": "goto",
            "target": "start_survey_node"
          },
          {
            "id": "delete_profile",
            "text": "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ",
            "action": "goto",
            "target": "delete_confirmation_node"
          }
        ]
      },
      "position": {
        "x": 400,
        "y": 50
      }
    },
    {
      "id": "delete_confirmation_node",
      "type": "keyboard",
      "data": {
        "messageText": "‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ?\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!",
        "keyboardType": "inline",
        "buttons": [
          {
            "id": "confirm_delete",
            "text": "‚úÖ –î–∞, —É–¥–∞–ª–∏—Ç—å",
            "action": "delete_user_data"
          },
          {
            "id": "cancel_delete",
            "text": "‚ùå –û—Ç–º–µ–Ω–∞",
            "action": "goto",
            "target": "profile_command_node"
          }
        ]
      },
      "position": {
        "x": 600,
        "y": 200
      }
    }
  ],
  "connections": [
    {
      "id": "conn_1",
      "source": "start_survey_node",
      "target": "age_question_node"
    },
    {
      "id": "conn_2",
      "source": "age_question_node",
      "target": "gender_question_node"
    },
    {
      "id": "conn_3",
      "source": "gender_question_node",
      "target": "interests_question_node"
    },
    {
      "id": "conn_4",
      "source": "interests_question_node",
      "target": "experience_question_node"
    },
    {
      "id": "conn_5",
      "source": "experience_question_node",
      "target": "contact_question_node"
    },
    {
      "id": "conn_6",
      "source": "contact_question_node",
      "target": "contact_info_node"
    },
    {
      "id": "conn_7",
      "source": "contact_question_node",
      "target": "feedback_question_node"
    },
    {
      "id": "conn_8",
      "source": "contact_info_node",
      "target": "feedback_question_node"
    },
    {
      "id": "conn_9",
      "source": "feedback_question_node",
      "target": "suggestions_node"
    },
    {
      "id": "conn_10",
      "source": "feedback_question_node",
      "target": "final_thanks_node"
    },
    {
      "id": "conn_11",
      "source": "suggestions_node",
      "target": "final_thanks_node"
    },
    {
      "id": "conn_12",
      "source": "final_thanks_node",
      "target": "start_survey_node"
    },
    {
      "id": "conn_13",
      "source": "delete_confirmation_node",
      "target": "profile_command_node"
    }
  ]
}