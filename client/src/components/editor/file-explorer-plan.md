# План реализации панели проводника файлов

## Общие требования

1. Все файлы и изменения в коде должны быть не более 100-200 строк  
2. Если изменение больше этого, рефакторить в новый файл  
3. Все новые файлы и изменения должны иметь JSDoc комментарии на русском, включая @fileoverview  
4. После каждого цикла изменений выполнять проверку TypeScript ошибок  
5. После цикла исправлений, когда все работает, сохранять изменения всей ветки в Git на русском  

## 1. Подготовительные работы
- [x] 1.1. Изучить структуру текущих компонентов `export-panel.tsx` и `use-code-generator.ts`
- [x] 1.2. Проанализировать работу `FlexibleLayout` и способы интеграции новой панели
- [x] 1.3. Определить место расположения панели (левая боковая панель)
- [x] 1.4. Подготовить необходимые иконки для файлов и папок

## 2. Создание компонента проводника файлов
- [x] 2.1. Создать основной компонент `FileExplorerPanel`
- [x] 2.2. Реализовать дерево файлов в стиле VS Code
- [x] 2.3. Добавить возможность выбора файла для просмотра
- [x] 2.4. Интегрировать с Monaco Editor для отображения содержимого файлов
- [x] 2.5. Реализовать переключение между форматами файлов (python, json, requirements и т.д.)

## 3. Интеграция с генератором кода
- [x] 3.1. Использовать хук `use-code-generator.ts` для получения содержимого файлов
- [x] 3.2. Реализовать кэширование сгенерированных файлов
- [x] 3.3. Обеспечить синхронизацию с текущими данными бота
- [x] 3.4. Добавить индикацию загрузки при генерации файлов
- [x] 3.5. Обеспечить соответствие названий файлов в панели реальным файлам, создаваемым в системе
- [x] 3.6. Обеспечить получение актуальных данных (группы) для генерации кода
- [x] 3.7. Обеспечить правильную загрузку содержимого файлов при выборе в проводнике
- [x] 3.8. Обеспечить генерацию кода при наличии действительных данных бота
- [x] 3.9. Обеспечить диагностику и обработку случаев с пустыми или недействительными данными бота
- [x] 3.10. Обеспечить обработку случая, когда botData изначально undefined

## 4. Интеграция с основным интерфейсом
- [x] 4.1. ~~Добавить вкладку "Файлы" в `AdaptiveHeader` и `Editor`~~ (изменено: теперь панель открывается как боковая панель)
- [x] 4.2. Добавить панель проводника в `FlexibleLayout`
- [x] 4.3. ~~Реализовать открытие панели при клике на вкладку "Файлы"~~ (изменено: теперь панель открывается через кнопку в заголовке)
- [ ] 4.4. Обеспечить правильное отображение в мобильной версии
- [ ] 4.5. Добавить кнопку для сворачивания/разворачивания панели

## 5. Функциональность просмотра и экспорта
- [x] 5.1. Реализовать просмотр содержимого файлов в Monaco Editor
- [x] 5.2. Добавить кнопки копирования содержимого
- [x] 5.3. Реализовать скачивание отдельных файлов
- [x] 5.4. Добавить отображение статистики по файлам (кол-во строк, размер и т.д.)

## 6. Дизайн и UX
- [x] 6.1. Создать стиль панели в соответствии с текущим дизайном приложения
- [x] 6.2. Добавить иконки для различных типов файлов
- [x] 6.3. Обеспечить темную/светлую тему в соответствии с основным приложением
- [x] 6.4. Добавить анимации открытия/закрытия и выбора файлов

## 7. Тестирование и отладка
- [ ] 7.1. Протестировать отображение файлов для разных ботов
- [ ] 7.2. Проверить корректность генерации и отображения содержимого
- [ ] 7.3. Протестировать работу на мобильных устройствах
- [ ] 7.4. Проверить производительность при большом количестве файлов

## 8. Дополнительные функции
- [ ] 8.1. Добавить возможность сохранения состояния (развернутые/свернутые элементы)
- [ ] 8.2. Реализовать быстрый поиск по файлам
- [ ] 8.3. Добавить индикацию изменений в файлах
- [ ] 8.4. Обеспечить совместимость с горячими клавишами