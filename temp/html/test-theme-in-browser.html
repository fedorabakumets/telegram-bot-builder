<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Test</title>
</head>
<body>
    <div id="test-results"></div>
    
    <script>
        // –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
        function testTheme() {
            const results = [];
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            fetch('http://localhost:5000')
                .then(response => response.text())
                .then(html => {
                    results.push(`‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (${html.length} —Å–∏–º–≤–æ–ª–æ–≤)`);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: API —Ä–∞–±–æ—Ç–∞–µ—Ç
                    return fetch('http://localhost:5000/api/projects');
                })
                .then(response => response.json())
                .then(projects => {
                    results.push(`‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–µ–∫—Ç–æ–≤: ${projects.length}`);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –≠–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Ç–µ–º—ã
                    const testDiv = document.createElement('div');
                    testDiv.style.cssText = '--background: hsl(0, 0%, 100%); --foreground: hsl(20, 14.3%, 4.1%);';
                    testDiv.className = 'bg-background text-foreground';
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º dark –∫–ª–∞—Å—Å –∏ –º–µ–Ω—è–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
                    testDiv.style.cssText = '--background: hsl(240, 10%, 3.9%); --foreground: hsl(0, 0%, 98%);';
                    testDiv.className = 'dark bg-background text-foreground';
                    
                    results.push('‚úÖ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ');
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: localStorage
                    try {
                        localStorage.setItem('telegram-bot-builder-theme', 'dark');
                        const saved = localStorage.getItem('telegram-bot-builder-theme');
                        results.push(`‚úÖ localStorage —Ä–∞–±–æ—Ç–∞–µ—Ç: ${saved}`);
                        localStorage.removeItem('telegram-bot-builder-theme');
                    } catch (e) {
                        results.push('‚ùå localStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 5: Media queries
                    const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
                    results.push(`‚úÖ System theme detection: ${darkModeQuery.matches ? 'dark' : 'light'}`);
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    document.getElementById('test-results').innerHTML = 
                        '<h2>üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã:</h2>' +
                        results.map(r => '<p>' + r + '</p>').join('') +
                        '<p><strong>üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!</strong></p>';
                })
                .catch(error => {
                    document.getElementById('test-results').innerHTML = 
                        '<h2>‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h2><p>' + error.message + '</p>';
                });
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        setTimeout(testTheme, 1000);
    </script>
</body>
</html>