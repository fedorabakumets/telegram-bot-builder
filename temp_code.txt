    await update_user_data_in_db(user_id, button_text, response_data)
    logging.info(f"РљРЅРѕРїРєР° СЃРѕС…СЂР°РЅРµРЅР°: {button_text} (РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ {user_id})")
    
    # РћС‚РїСЂР°РІР»СЏРµРј СЃРѕРѕР±С‰РµРЅРёРµ РґР»СЏ СѓР·Р»Р° age_input
    text = """РЎРєРѕР»СЊРєРѕ С‚РµР±Рµ Р»РµС‚? рџЋ‚

РќР°РїРёС€Рё СЃРІРѕР№ РІРѕР·СЂР°СЃС‚ С‡РёСЃР»РѕРј (РЅР°РїСЂРёРјРµСЂ, 25):"""
    
    # РРЅРёС†РёР°Р»РёР·РёСЂСѓРµРј Р±Р°Р·РѕРІС‹Рµ РїРµСЂРµРјРµРЅРЅС‹Рµ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ РµСЃР»Рё РёС… РЅРµС‚
    if user_id not in user_data or "user_name" not in user_data.get(user_id, {}):
        # РџРѕР»СѓС‡Р°РµРј РѕР±СЉРµРєС‚ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ РёР· СЃРѕРѕР±С‰РµРЅРёСЏ РёР»Рё callback
        user_obj = None
        # РџСЂРѕРІРµСЂСЏРµРј РЅР°Р»РёС‡РёРµ message (РґР»СЏ message handlers)
        if 'message' in locals() and hasattr(locals()['message'], 'from_user'):
            user_obj = message.from_user
        # РџСЂРѕРІРµСЂСЏРµРј РЅР°Р»РёС‡РёРµ callback_query (РґР»СЏ callback handlers)
        elif 'callback_query' in locals() and 'callback_query' in globals() and hasattr(callback_query, 'from_user'):
            user_obj = callback_query.from_user
        # Р’ СЃР»СѓС‡Р°Рµ РµСЃР»Рё РјС‹ РІРЅСѓС‚СЂРё message handler, РёСЃРїРѕР»СЊР·СѓРµРј message.from_user
        elif hasattr(locals().get('message', {}), 'from_user'):
            user_obj = message.from_user
        
        if user_obj:
            init_user_variables(user_id, user_obj)
    
    # РџРѕРґСЃС‚Р°РІР»СЏРµРј РІСЃРµ РґРѕСЃС‚СѓРїРЅС‹Рµ РїРµСЂРµРјРµРЅРЅС‹Рµ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ РІ С‚РµРєСЃС‚
    user_vars = await get_user_from_db(user_id)
    if not user_vars:
        user_vars = user_data.get(user_id, {})
    
    # get_user_from_db С‚РµРїРµСЂСЊ РІРѕР·РІСЂР°С‰Р°РµС‚ СѓР¶Рµ РѕР±СЂР°Р±РѕС‚Р°РЅРЅС‹Рµ user_data
    if not isinstance(user_vars, dict):
        user_vars = user_data.get(user_id, {})
    
    # Р—Р°РјРµРЅСЏРµРј РІСЃРµ РїРµСЂРµРјРµРЅРЅС‹Рµ РІ С‚РµРєСЃС‚Рµ
    import re
    def replace_variables_in_text(text_content, variables_dict):
        """Р—Р°РјРµРЅСЏРµС‚ РїРµСЂРµРјРµРЅРЅС‹Рµ С„РѕСЂРјР°С‚Р° {variable_name} РІ С‚РµРєСЃС‚Рµ РЅР° РёС… Р·РЅР°С‡РµРЅРёСЏ
        
        Args:
            text_content (str): РўРµРєСЃС‚ СЃ РїРµСЂРµРјРµРЅРЅС‹РјРё РґР»СЏ Р·Р°РјРµРЅС‹
